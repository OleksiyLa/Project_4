{% extends "./base.html" %}
{% load static %}

{% block title %}Goals Board{% endblock %}

{% block content %}
<div class="modal" id="delete-goal-modal"></div>
<div class="container d-flex align-items-center flex-column" id="tasks-container">
<h1>Tasks</h1>
{% if tasks %}
{% for goal in goals %}
    <div id="tasks" class="container p-0 mb-5">
      <div class="row">
        <div class="col-12">
          <div class="card card-border-primary">
            <div class="bg-dark p-2" href="#">
              <a class="btn btn-success d-inline float-end" href="{% url 'add_task' slug=goal.1 %}">Add Task</a>
            </div>
            <div class="card-header">
              <h5 class="card-title text-center p-2">My Goal: "{{goal.0}}"</h5>
            </div>
          
            <div class="row">
            {% for task in tasks %}
            {% if task.goal.title == goal.0 %}
            
            <div class="card-body p-3 col-3">
              <div class="card mb-3 bg-light">
                <div class="card-body p-3">
                  <sup>Created: {{ task.created_at }}</sup>
                  <img src="{% static 'svg/delete_icon.svg' %}" alt="delete-icon" class="float-end delete-icon" data-title="{{ task.title }}" data-url="{% url 'delete_task' slug=task.slug %}" data-txt="task">
                  <h3 class="h4 text-center my-2">{{ task.title }}</h3>
                  <h3 class="h4 text-center my-2">{{ task.goal.title }}</h3>
                  <p class="text-center">{{ task.description }}</p>
                  <sub>Deadline: {{ task.due_date }}</sub>
                  <div class="mt-3">
                    <a class="btn btn-outline-primary w-100" href="{% url 'edit_task' slug=task.slug %}">Edit</a>
                    <a class="btn btn-outline-primary w-100" href="{% url 'schedule_task' slug=task.slug %}">Schedule</a>
                  </div>
                </div>
              </div>
            </div>
          
            {% endif %}
            {% endfor %}
          </div>
          </div>
        </div>
      </div>
    </div>
{% endfor %}
{% else %}
  <p>No tasks yet.</p>
{% endif %}
</div>
{% endblock %}


{% block js %}
  <script src="{% static 'js/index.js' %}"></script>
{% endblock %}
